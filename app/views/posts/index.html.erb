<p style="color: green"><%= notice %></p>

<h1>Posts</h1>

<div id="posts">
  <% if @error_message %>
    <div style="color:red; margin-bottom: 5px">
      <strong><%= @error_message %></strong>
    </div>
  <% end %>
  <table border="1">
    <thead>
      <tr>
        <th>Title</th>
        <th>Category</th>
        <th>Published At</th>
        <th></th>
      </tr>
    </thead>
    <tbody>
        <% @posts.each do |post| %>
          <tr>
            <td style="padding: 7px;">
              <%= post.title %>
            </td>
            <td style="padding: 7px;">
              <%= link_to post.category, posts_path(category: post.category) if post.category.present? %>
            </td>
            <td style="padding: 7px;">
              <%= post.publishid_at if post.publishid_at %>
            </td>
            <td style="padding: 7px;">
              <%= link_to "Show this post", post %>
            </td>
          </tr>
        <% end %>
    </tbody>
  </table>
</div>

<% if !params[:category].present? %>
  <%= link_to "New post", new_post_path %>
<% else %>
  <%= link_to "Back to posts", posts_path %>
<% end %>